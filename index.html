<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–§–µ—Ä–º–∞ —Å –≤–µ—Å–æ–º</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #e5f9e0;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  header {
    background: #4CAF50;
    color: white;
    padding: 15px;
    width: 100%;
    text-align: center;
  }
  #money {
    font-weight: bold;
  }
  #garden {
    display: grid;
    grid-template-columns: repeat(5, 100px);
    grid-auto-rows: 100px; /* —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã—Å–æ—Ç–∞ */
    gap: 10px;
    margin: 20px;
  }
  .bed {
    width: 100px;
    height: 100px;
    background: #d2b48c;
    border: 2px solid #8b5a2b;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
  }
  .plant {
    width: 80px;
    height: 80px;
    transition: transform 0.3s;
  }
  .inventory-modal {
    display: none;
    position: fixed;
    top: 10%;
    left: 50%;
    transform: translateX(-50%);
    background: white;
    border: 2px solid #333;
    padding: 20px;
    max-height: 70%;
    overflow-y: auto;
    z-index: 10;
  }
  .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  #shop {
    margin: 20px;
    padding: 10px;
    background: #fff;
    border: 2px solid #333;
  }
  button {
    margin: 5px;
    padding: 5px 10px;
    cursor: pointer;
  }
</style>
</head>
<body>
<header>
  <h1>üå± –§–µ—Ä–º–∞ —Å –≤–µ—Å–æ–º</h1>
  <p>–ú–æ–Ω–µ—Ç—ã: <span id="money">100</span></p>
  <button onclick="openInventory()">üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</button>
</header>

<div id="garden"></div>

<div id="shop">
  <h2>–ú–∞–≥–∞–∑–∏–Ω</h2>
  <div id="shop-items"></div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è -->
<div id="inventoryModal" class="inventory-modal">
  <div class="modal-header">
    <h2>üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
    <button onclick="closeInventory()">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
  <ul id="inventoryList"></ul>
</div>

<script>
  let money = 100;
  let garden = Array(15).fill(null);
  let inventory = [];
  let selectedSeed = null;

  // –ë–∞–∑–æ–≤—ã–µ —Ä–∞—Å—Ç–µ–Ω–∏—è
  const plants = {
    carrot: { name: "–ú–æ—Ä–∫–æ–≤—å", price: 10, growTime: 5000, basePricePerKg: 5, img: "ü•ï" },
    strawberry: { name: "–ö–ª—É–±–Ω–∏–∫–∞", price: 20, growTime: 8000, basePricePerKg: 10, img: "üçì" },
    grape: { name: "–í–∏–Ω–æ–≥—Ä–∞–¥", price: 30, growTime: 12000, basePricePerKg: 15, img: "üçá" },
    pumpkin: { name: "–¢—ã–∫–≤–∞-–≤–µ–ª–∏–∫–∞–Ω", price: 50, growTime: 36000, basePricePerKg: 20, img: "üéÉ" }
  };

  const gardenEl = document.getElementById("garden");
  const moneyEl = document.getElementById("money");
  const shopItemsEl = document.getElementById("shop-items");
  const inventoryList = document.getElementById("inventoryList");

  // –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—è–¥–æ–∫
  function renderGarden() {
    gardenEl.innerHTML = "";
    garden.forEach((plant, index) => {
      const bed = document.createElement("div");
      bed.className = "bed";
      bed.onclick = () => plantSeed(index);
      if (plant) {
        const plantEl = document.createElement("div");
        plantEl.className = "plant";
        plantEl.textContent = plant.img;
        bed.appendChild(plantEl);
      }
      gardenEl.appendChild(bed);
    });
  }

  // –ú–∞–≥–∞–∑–∏–Ω
  function renderShop() {
    shopItemsEl.innerHTML = "";
    for (let key in plants) {
      const p = plants[key];
      const btn = document.createElement("button");
      btn.textContent = `${p.name} - ${p.price}üí∞`;
      btn.onclick = () => { selectedSeed = key; };
      shopItemsEl.appendChild(btn);
    }
  }

  // –ü–æ—Å–∞–¥–∫–∞
  function plantSeed(index) {
    if (!selectedSeed) return;
    if (garden[index]) return;

    const plantData = plants[selectedSeed];
    if (money < plantData.price) {
      alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!");
      return;
    }
    money -= plantData.price;
    moneyEl.textContent = money;

    garden[index] = {
      ...plantData,
      plantedAt: Date.now(),
      ready: false,
      index: index
    };

    renderGarden();

    setTimeout(() => {
      garden[index].ready = true;
      renderGarden();
    }, plantData.growTime);
  }

  // –°–±–æ—Ä —É—Ä–æ–∂–∞—è
  function harvest(index) {
    const plant = garden[index];
    if (!plant || !plant.ready) return;

    // üé≤ –°–ª—É—á–∞–π–Ω—ã–π –≤–µ—Å
    let weight = +(Math.random() * 10 + 1).toFixed(2);

    // üèÜ –ú–∞–ª–µ–Ω—å–∫–∏–π —à–∞–Ω—Å –Ω–∞ "—Å—É–ø–µ—Ä-—Ç—è–∂—ë–ª—ã–π"
    if (Math.random() < 0.05) {
      weight = +(weight * 5).toFixed(2);
    }

    const value = Math.floor(weight * plant.basePricePerKg);

    inventory.push({
      name: plant.name,
      weight: weight,
      value: value,
      img: plant.img
    });

    // –æ—á–∏—Å—Ç–∫–∞ –≥—Ä—è–¥–∫–∏
    garden[index] = null;
    renderGarden();
    updateInventory();
  }

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
  function updateInventory() {
    inventoryList.innerHTML = "";
    inventory.forEach((item, i) => {
      const li = document.createElement("li");
      li.textContent = `${item.img} ${item.name} ‚Äî ${item.weight} –∫–≥ ‚Äî ${item.value}üí∞`;
      const sellBtn = document.createElement("button");
      sellBtn.textContent = "–ü—Ä–æ–¥–∞—Ç—å";
      sellBtn.onclick = () => sellItem(i);
      li.appendChild(sellBtn);
      inventoryList.appendChild(li);
    });
  }

  function sellItem(i) {
    money += inventory[i].value;
    moneyEl.textContent = money;
    inventory.splice(i, 1);
    updateInventory();
  }

  // –ú–æ–¥–∞–ª–∫–∏
  function openInventory() {
    document.getElementById("inventoryModal").style.display = "block";
  }
  function closeInventory() {
    document.getElementById("inventoryModal").style.display = "none";
  }

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  renderGarden();
  renderShop();
</script>
</body>
</html>
